高清晰度多媒体接口（英文：High Definition Multimedia Interface，HDMI） 
因为需要计算HDMI的差分线传输速率，把HDMI相关的知识都看了一下，做如下记录，方便以后回顾。

#### 1.TMDS是什么？

HDMI 有4对差分线，一对时钟线，三对数据线，其中三对数据线分别传输RGB信号。

![a15b4afegw1ezdeq0r7cjj20h006474l](https://github.com/Meekdai/meekdai.github.io/assets/11755104/a5daf32d-cc0e-477f-b786-e7e76fcd0e67)

HDMI标准继续沿用了和DVI相同的，由Silicon Image公司发明的TMDS(Time Minimized Differential Signal)最小化传输差分信号传输技术。TMDS是一种微分信号机制，采用的是差分传动方式。这不仅是DVI技术的基础，也是HDMI技术的基础原理。

  一般来说，HDMI传输的编码格式中要包含视频数据（HDMI1.3版本前每个像素采用24bit）、控制数据和数据包（数据包中包含音频数据和附加信息数据，例如纠错码等）。TMDS每个通道在传输时要包含一个2bit的控制数据、8bit的视频数据或者4bit的数据包即可。在HDMI信息传输过程中，可以分为三个阶段：视频数据传输周期、控制传输周期和数据岛传输周期，分别对应上述的三种数据类型。

![a15b4afegw1ezdeqxlxvij20t30drjt6](https://github.com/Meekdai/meekdai.github.io/assets/11755104/bb31ab5b-3c9b-4c30-b177-41e7132150d1)

#### 2.HDMI带宽和TMDS的关系

在HDMI标准中所规定的带宽，在1.0版本就设定为最高4.96Gbps。那么这一数值是怎么的来的呢？和TMDS又有什么关系呢？我们看下面的公式：

```串行接口带宽 = 系统时钟频率 X 数据量```

  这是一个适用于所有串口传输接口带宽计算的公式。在所有的数字电路中，都有一个负责提供基本频率的元器件——晶振，它就像是一个精确的闹钟一样，电路中所有的元器件都按照它的节奏统一行动。比方说，某一运算电路的晶振频率是100Hz,就是说这一电路在一秒钟内可以进行100次运算过程。由此可见，晶振的工作频率越高，每秒所能处理的运算次数就会越多，数据的处理能力也就会越强大。而HDMI标准中，这个原理同样适用。

HDMI电路中的时钟频率，在最初制定时范围从` 25MHz-165MHz` 之间，也就是说一个TMDS通道每秒最多能传输` 165MHz*10bit=1.65Gbit` 的数据，3个TMDS通道一秒就可以传输` 1.65*3=4.95Gbit` 的数据，再加上控制数据，用标准方法表示就是` 4.96Gbps` 的带宽。而如果用像素点来表示，那就是一秒可以传输显示1.65G个像素点（一个完整的像素点信息由R/G/B三原色信息构成）所需要的数据量。
>注：时钟频率指的是TMDS Character Rate， 详见附件《HDMI 2.0 规范》] P28 【6.1.1】
由于侵权已经删除PDF文档，需要了解的可以私聊。

在数字音频方面，HDMI灵活的支持符合IEC60985 L-PCM标准的32kHz、44.1kHz和48kHz、16bit量化的立体声数字音频信号和IEC 61937标准的采样率为192KHz，24bit量化的单路无压缩PCM数字音频信号，或者8路96kHz的声音数据流。此外，在家庭影院中常用的DolbyDigital5.1和DTS数字音频格式也能通过HDMI直接传输。

#### 3.HDMI速率计算
在计算之前，需要补充一下1080p 和 1080i的区别：

1080p是一种视频显示格式，外语字母P意为逐行扫描（Progressive scanning）。1080p是一种视频显示格式，外语字母P意为逐行扫描（Progressive scan），有别于1080i的隔行扫描(interlaced scan)。数字1080则表示水平方向有1080条水平扫描线。通常1080p的画面分辨率为`1920*1080`。

1080i 是一种高清晰度电视信号格式。其中，“1080”表示垂直方向有1080条水平扫描线，“i”表示采用交错式扫描视频显示方式（interlaced scan）。在播放时，它先扫描单数的垂直画面，再扫描双数的垂直画面，故只需要1080p一半的带宽。它的出现对电视产业的发展具有重要的影响。

① 传输背景：`HDMI 1080p 60FPS 48bit` 
最大分辨率是`1920*1080`，所以每一帧图像有`1920*1080=2073600`个像素，另外，HDMI的图像还需要预留百分之20的空白像素，所以直实的一帧图像的像素是：`2073600*1.2=2488320`个像素。我们每个像素用3个16bit表示，则总共需要的bit数是`2488320*3*(16+4)=149299200`个bit（注意每8bit要加2个控制bit，即8b10b编码）,每秒刷新60次，即60Hz，那么每秒传输的位数是：`149299200*60=8.9580e+009`，化成以Gbps为单位，则总速率为：8.958Gbps，每路的速率为：`8.958/3= 2.9860Gbps`

② 传输背景：`HDMI 4K 60FPS 48bit` 
发现其他不变，就是分辨率`1920*1080`变为4K的`3840*2160`，所以可以轻松的得到没路的速率为`2.9860Gbps*4=11.944Gbps`

HDMI 1.4已经可以支持4K了，但是受制于带宽，最高只能达到`3840*2160`分辨率和30FPS帧率，HDMI 2.0则将带宽扩充到了18Gbps，可以支持`3840*2160`分辨率和50FPS、60FPS帧率。HDMI 2.0 最大每路的速率为6Gbps，而根据上述计算，估计HDMI 2.0 的4K 60FPS只能输出24bit的色彩深度。

PS：最后由于有朋友问起带宽和下载速度的关系，这里说明一下。假如你办的电信宽带为10M，即给你的带宽为10Mbps，注意这里是小b，而我们的下载速度一般说500KB/S，这里是大B。所以理论上10M的下载速度为10Mbps/8=1.25MB/S，也就是说，你下载的最快速度可以达到1.25MB/S。但是由于传输线损耗，已经其他方面的原因，一般是达不到理论速度的。

[comment]: # (##{"timestamp":1451096020}##)