<html data-color-mode="light" data-dark-theme="dark" data-light-theme="light">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type" />
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link href="../static/github-light.css" rel="stylesheet" />
<link href="https://unpkg.com/@primer/css@^21.0.7/dist/primer.css" rel="stylesheet" />

</head>
<style>
.markdown-body {
    box-sizing: border-box;
    min-width: 200px;
    max-width: 900px;
    margin: 10px auto;
    padding: 45px;
    font-family: sans-serif;
}
@media (max-width: 560px) {
    .markdown-body { padding: 8px;} 
}

.avatar {transition: 0.8s;}
.avatar:hover {transform: scale(1.15) rotate(360deg);}

h1 {display:flex;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right button{margin-left:8px;padding:16px;}
.SideNav{min-width: 360px;}
.SideNav-icon{margin-right: 16px}
.comments{border-top: 2px solid var(--color-border-default);}
.footer {margin: 40px auto; text-align: center;font-size: small;}

</style>

<body>
<div class="markdown-body">
    <h1>
        <div id="postTitle"></div>
        <div class="title-right">
        <button class="btn btn-invisible circle" onclick="window.location.href='/'" title="首页"><svg class="octicon octicon-sun" width="16" height="16"><path id="pathHome" fill-rule="evenodd"></path></svg></button>
        
        <button class="btn btn-invisible circle" onclick="gotoSource()" title="Issue"><svg class="octicon octicon-sun" width="16" height="16"><path id="pathIssue" fill-rule="evenodd"></path></svg></button>
        
        <button class="btn btn-invisible circle" onclick="modeSwitch()" title="切换主题"><svg class="octicon octicon-sun" width="16" height="16"><path id="themeSwitch" fill-rule="evenodd"></path></svg></button>
        </div>
    </h1>
    <div id="postBody"></div>

    <div class="comments">
    <script src="https://utteranc.es/client.js"
        repo="Meekdai/meekdai.github.io"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async>
    </script>
    </div>

    <div class="footer">Copyright © <span id="year"></span> <a id="footerblogTitle" href=""></a> <p><span id="filingNum"></span><span id="runday"></span>Powered by <a href="https://github.com/Meekdai/Gmeek" target="_blank">Gmeek</a></p></div>
</div>
</body>

<script src="../static/icon.js"></script>
<script>

var blogBase={"postTitle": "NodeMcu\u5b66\u4e60\u7b14\u8bb0", "postBody": "<p>##NodeMCU \u7b80\u4ecb</p>\n<p>\u8d85\u7b80\u5355\u7684\u7269\u8054\u7f51\u5f00\u53d1\u5e73\u53f0<a href=\"http://nodemcu.com/index_cn.html\" rel=\"nofollow\">NodeMcu</a>\uff0c\u4e00\u6b3e\u5f00\u6e90\u5feb\u901f\u786c\u4ef6\u539f\u578b\u5e73\u53f0\uff0c\u5305\u62ec\u56fa\u4ef6\u548c\u5f00\u53d1\u677f\uff0c\u7528\u51e0\u884c\u7b80\u5355\u7684Lua\u811a\u672c\u5c31\u80fd\u5f00\u53d1\u7269\u8054\u7f51\u5e94\u7528\u3002</p>\n<p>\u5176\u4e3b\u8981\u7279\u70b9\u5982\u4e0b\uff1a</p>\n<ul>\n<li>\u50cf Arduino \u4e00\u6837\u64cd\u4f5c\u786c\u4ef6 IO \u63d0\u4f9b\u786c\u4ef6\u7684\u9ad8\u7ea7\u63a5\u53e3\uff0c\u53ef\u4ee5\u5c06\u5e94\u7528\u5f00\u53d1\u8005\u4ece\u7e41\u590d\u7684\u786c\u4ef6\u914d\u7f6e\u3001\u5bc4\u5b58\u5668\u64cd\u4f5c\u4e2d\u89e3\u653e\u51fa\u6765\u3002\u7528\u4ea4\u4e92\u5f0f Lua \u811a\u672c\uff0c\u50cf Arduino \u4e00\u6837\u7f16\u5199\u786c\u4ef6\u4ee3\u7801\uff01</li>\n<li>\u7528 Nodejs \u7c7b\u4f3c\u8bed\u6cd5\u5199\u7f51\u7edc\u5e94\u7528 \u4e8b\u4ef6\u9a71\u52a8\u578b API \u6781\u5927\u7684\u65b9\u4fbf\u4e86\u7528\u6237\u8fdb\u884c\u7f51\u7edc\u5e94\u7528\u5f00\u53d1\uff0c\u4f7f\u7528\u7c7b\u4f3c Nodejs \u7684\u65b9\u5f0f\u7f16\u5199\u7f51\u7edc\u4ee3\u7801\uff0c\u5e76\u8fd0\u884c\u4e8e 5mm*5mm \u5927\u5c0f\u7684 MCU \u4e4b\u4e0a\uff0c\u52a0\u5feb\u60a8\u7684\u7269\u8054\u7f51\u5f00\u53d1\u8fdb\u5ea6\u3002</li>\n<li>\u8d85\u4f4e\u6210\u672c\u7684 WIFI \u6a21\u5757 \u7528\u4e8e\u5feb\u901f\u539f\u578b\u7684\u5f00\u53d1\u677f\uff0c\u96c6\u6210\u4e86\u552e\u4ef7\u4f4e\u4e8e 10 \u4eba\u6c11\u5e01 WIFI \u82af\u7247 ESP8266\uff0c\u4e3a\u60a8\u63d0\u4f9b\u6027\u4ef7\u6bd4\u6700\u9ad8\u7684\u7269\u8054\u7f51\u5e94\u7528\u5f00\u53d1\u5e73\u53f0\u3002</li>\n</ul>\n<p>\u57fa\u4e8e\u4e50\u946b ESP8266 \u7684 NodeMCU \u5f00\u53d1\u677f\uff0c\u5177\u6709 GPIO\u3001PWM\u3001I2C\u30011-Wire\u3001ADC \u7b49\u529f\u80fd\uff0c\u7ed3\u5408 NodeMCU \u56fa\u4ef6\u4e3a\u60a8\u7684\u539f\u578b\u5f00\u53d1\u63d0\u4f9b\u6700\u5feb\u901f\u7684\u9014\u5f84\u3002</p>\n<p>NodeMCU \u6700\u65b0\u7248\u4e3a 1.0\uff0c\u5982\u4e0b\u56fe\uff1a</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/Meekdai/meekdai.github.io/assets/11755104/b4c8e6c7-0be7-4488-8517-3034592ad1ba\"><img src=\"https://github.com/Meekdai/meekdai.github.io/assets/11755104/b4c8e6c7-0be7-4488-8517-3034592ad1ba\" alt=\"4004543695.jpg\" style=\"max-width: 100%;\"></a></p>\n<p>\u5176\u786c\u4ef6\u8be6\u7ec6\u914d\u7f6e\u5982\u4e0b\uff1a</p>\n<p>\u6838\u5fc3\u6a21\u7ec4\u4e3a ESP8266</p>\n<blockquote>\n<pre><code>MCU \u4e3a Xtensa L106\nRAM 50K\nFlash 512K\nD1~D10\uff1a10 GPIO, \u6bcf\u4e2a\u90fd\u80fd\u914d\u7f6e\u4e3a PWM, I2C, 1-wire\nFCC \u8ba4\u8bc1\u7684 WIFI \u6a21\u5757\uff0c\u5185\u7f6e PCB \u5929\u7ebf\uff0c\u53ef\u4f5c\u4e3a AP\n</code></pre>\n</blockquote>\n<p>CP2102 USB \u4e32\u53e3\uff0c\u5373\u63d2\u5373\u7528\uff08\u5b98\u65b9\u9a71\u52a8\u652f\u6301 Windows, OS X\uff0cLinux \u4ee5\u53ca VMware\uff09</p>\n<p>##\u9009\u62e9\u5f00\u53d1\u7cfb\u7edf</p>\n<p>NodeMCU \u76ee\u524d\u652f\u6301\u7684\u5f00\u53d1\u4e3b\u673a\u7cfb\u7edf\u7c7b\u578b\u6db5\u76d6 Windows\uff0cLinux \u548c Mac OS X\uff0c\u4e5f\u652f\u6301\u901a\u8fc7 VMware \u865a\u62df\u673a\u642d\u5efa\u7684 Linux \u73af\u5883\u3002\n\u6211\u7528\u7684\u662fWindows\uff0c\u5e76\u4e14\u7528\u4e86<a href=\"http://cmder.net/\" rel=\"nofollow\">cmder</a>\u6765\u4f18\u5316\u547d\u4ee4\u884c\u7684\u7528\u6237\u4f53\u9a8c\u3002\u6709\u5173cmder\u7684\u4f7f\u7528\u7b14\u8bb0\uff0c\u540e\u9762\u4f1a\u6709\u6587\u7ae0\u8be6\u7ec6\u8bb0\u5f55\u3002</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/Meekdai/meekdai.github.io/assets/11755104/73a4b628-c0f3-49a9-8fea-baa57e855dff\"><img src=\"https://github.com/Meekdai/meekdai.github.io/assets/11755104/73a4b628-c0f3-49a9-8fea-baa57e855dff\" alt=\"1384392589.jpg\" style=\"max-width: 100%;\"></a></p>\n<p>##\u5b89\u88c5\u4e32\u53e3\u9a71\u52a8</p>\n<p>\u5728\u9009\u5b9a\u5f00\u53d1\u7cfb\u7edf\u540e\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u8981\u5b89\u88c5\u4e32\u53e3\u9a71\u52a8\uff0c\u6253\u901a\u5f00\u53d1\u4e3b\u673a\u4e0e NodeMCU \u677f\u5b50\u7684\u901a\u4fe1\uff0c\u4ee5\u4fbf\u70e7\u5f55\u56fa\u4ef6\u3001\u6267\u884c\u547d\u4ee4\u6216\u8005\u4e0a\u4f20 Lua \u7a0b\u5e8f\u3002</p>\n<p>\u56e0\u4e3a NodeMCU 1.0 \u91c7\u7528\u4e86 cp2102 USB \u4e32\u53e3\uff0c\u5176\u9a71\u52a8\u5b8c\u7f8e\u652f\u6301 Windows\uff0cLinux\uff0cOS X \u548c VMWare\uff0c\u6240\u4ee5\u5404\u4e2a\u5e73\u53f0\u4e0b\u8f7d <a href=\"http://www.silabs.com/products/mcu/Pages/USBtoUARTBridgeVCPDrivers.aspx\" rel=\"nofollow\">CP210x</a> \u5b89\u88c5\u4e0a\u5373\u53ef\u3002</p>\n<p>\u5bf9\u4e8e VMware + Linux\uff0c\u9664\u4e86\u5728\u5f00\u53d1\u4e3b\u673a\u4e0a\u5b89\u88c5\u597d\u4e32\u53e3\u9a71\u52a8\u5916\uff0c\u9700\u8981\u5728\u63d2\u5165 USB \u4e32\u53e3\u4ee5\u540e\uff0c\u6839\u636e\u63d0\u793a\uff0c\u5141\u8bb8 VMware \u63a7\u5236\u8be5 USB \u4e32\u53e3\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e/Settings \u7684 USB &amp; Bluetooth \u6765\u8fdb\u884c\u8bbe\u7f6e\u3002</p>\n<p>\u5728\u547d\u4ee4\u884c\u4e0b\u8fd0\u884c\uff0c\u770b\u9a71\u52a8\u662f\u5426\u6b63\u786e\u52a0\u8f7d\u3002</p>\n<pre><code>$ ls -l /dev/tty*\n</code></pre>\n<p>\u4e0b\u9762\u4f60\u9700\u8981\u4e00\u4e2a\u4e32\u53e3\u901a\u4fe1\u5de5\u5177\uff0c\u5728 Linux \u4e0b\u63a8\u8350 minicom</p>\n<pre><code>$ sudo apt-get install minicom\n</code></pre>\n<p>\u5728Windows\u4e0b\u63a8\u8350SecureCRT\uff08<a href=\"https://securecrt.en.softonic.com/%EF%BC%89%EF%BC%8C%E6%88%96%E8%80%85%E8%87%AA%E8%A1%8C%E4%B8%8B%E8%BD%BD%E3%80%82\" rel=\"nofollow\">https://securecrt.en.softonic.com/\uff09\uff0c\u6216\u8005\u81ea\u884c\u4e0b\u8f7d\u3002</a></p>\n<p>\u4f7f\u7528\u4e32\u53e3\u901a\u4fe1\u5de5\u5177\u4e4b\u524d\uff0c\u9700\u8981\u660e\u786e NodeMCU 1.0 \u7684\u4e32\u53e3\u5c5e\u6027\u3002NodeMCU 1.0 \u7684\u542f\u52a8\u65f6\u6ce2\u7279\u7387\u4e3a 74880\uff0c\u4f46\u662f\u542f\u52a8\u540e\u5c31\u5207\u5230\u4e86 9600\uff0c\u5982\u679c\u76f4\u63a5\u7528 9600\uff0c\u5219\u5f00\u5934\u4f1a\u770b\u5230\u4e00\u4e32\u4e71\u7801\u4e4b\u540e\u6062\u590d\u6b63\u5e38\u3002\u800c\u5237\u56fa\u4ef6\u65f6\u53ef\u4ee5\u901a\u8fc7 esptool \u81ea\u5df1\u8bbe\u7f6e\u6ce2\u7279\u7387\uff0cNodeMCU 1.0 \u90a3\u8fb9\u4f1a\u6839\u636e\u7528\u6237\u8bbe\u7f6e\u81ea\u52a8\u914d\u7f6e\u6ce2\u7279\u7387\uff0c\u6bd4\u5982\u8bf4\u8bbe\u7f6e\u6210 115200\uff0c921600 \u90fd\u53ef\u4ee5\u3002</p>\n<p>\u4e32\u53e3\u8bbe\u5907\u5728\u4e0d\u540c\u7cfb\u7edf\u4e0b\u540d\u5b57\u6709\u4e9b\u5dee\u5f02\uff0c\u5728 Linux \u4e0b\u4e3a <code>/dev/ttyUSBn</code>\uff0c\u5728 Mac OS X \u4e0b\u4e3a <code>/dev/cu.SLAB_USBtoUART</code> \u548c <code>/dev/tty.SLAB_USBtoUART</code>\uff0cWindows \u4e0b\u4e3a <code>COMn</code>\u3002</p>\n<p>\u5176\u4ed6\u914d\u7f6e\u4e3a\u5e38\u89c1\u7684\uff1a<code>8N1</code>\uff0c\u5373 Bits\uff1a8\uff1bParity\uff1aNone\uff1bStop Bits\uff1a1\u3002\u53e6\u5916\uff0cHardware Flow Control \u548c Software Flow Control \u5747\u4e3a No \u3002</p>\n<p>##\u4e0b\u8f7d\u5e76\u70e7\u5f55\u6700\u65b0\u56fa\u4ef6</p>\n<p>###\u5728Linux\u4e0b</p>\n<p>\u4ece <a href=\"https://github.com/nodemcu/nodemcu-firmware/releases/\">NodeMCU Firmware Release</a> \u4e0b\u8f7d\u6700\u65b0\u56fa\u4ef6\uff0c\u4ee5 float \u4e3a\u4f8b\uff08\u6ce8\uff1ainteger \u4e0d\u652f\u6301 float\uff0c\u4f46\u8282\u7701\u4e86 11 KB\uff09\uff1a</p>\n<pre><code>$ wget -c https://github.com/nodemcu/nodemcu-firmware/releases/download/0.9.6-dev_20150704/nodemcu_float_0.9.6-dev_20150704.bin\n</code></pre>\n<p>\u63a5\u7740\u54b1\u4eec\u628a\u70e7\u5f55\u5de5\u5177 esptool.py \u4e0b\u8f7d\u4e0b\u6765\u3002\u540c\u65f6\u5b89\u88c5\u5176\u4ed6\u5fc5\u8981\u5de5\u5177\u3002</p>\n<pre><code>$ sudo apt-get install git python python-serial python-setuptools\n$ git clone https://github.com/themadinventor/esptool.git\n$ cd esptool\n$ python setup.py install\n</code></pre>\n<p>\u5728\u70e7\u5f55\u56fa\u4ef6\u4e4b\u524d\u9700\u8981\u901a\u8fc7\u5982\u4e0b\u64cd\u4f5c\u8fdb\u5165 NodeMCU \u7684\u56fa\u4ef6\u70e7\u5f55\u6a21\u5f0f\uff1a</p>\n<ul>\n<li>\u6309\u4f4f FLASH \u6309\u952e\uff08\u8fd9\u91cc\u4e0d\u677e\u5f00\uff09</li>\n<li>\u6309\u4e0b RST \u6309\u952e\u5e76\u677e\u5f00</li>\n<li>\u677e\u5f00 FLASH \u6309\u952e</li>\n</ul>\n<p>\u63a5\u7740\u901a\u8fc7 esptool.py \u70e7\u5f55\u56fa\u4ef6\uff1a</p>\n<pre><code>$ sudo esptool.py --port /dev/ttyUSB0 write_flash -fm dio -fs 32m -ff 40m 0x00000 nodemcu_float_0.9.6-dev_20150704.bin\n</code></pre>\n<p>\u70e7\u5f55\u5b8c\u4ee5\u540e\u8bb0\u5f97\u6309\u4e0b RST \u91cd\u542f\u8fdb\u5165\u65b0\u56fa\u4ef6\u3002</p>\n<p>esptool.py \u70e7\u5199\u65f6\u9ed8\u8ba4\u7684\u901a\u4fe1\u6ce2\u7279\u7387\u4e3a 115200\uff0c\u4e3a\u4e86\u52a0\u901f\u70e7\u5199\u901f\u5ea6\uff0c\u53ef\u4ee5\u901a\u8fc7 --baud 921600 \u8bbe\u7f6e\u4e3a 921600\u3002</p>\n<p>\u9700\u8981\u63d0\u5230\u7684\u662f\uff0c\u5982\u679c\u4e0d\u60f3\u4fdd\u7559\u56fa\u4ef6\u4e2d\u539f\u6709\u7684\u5404\u7c7b Lua \u7a0b\u5e8f\uff0c\u53ef\u4ee5\u5728\u542f\u52a8\u540e\u683c\u5f0f\u5316\u6587\u4ef6\u7cfb\u7edf\uff08file.format()\uff0c\u89c1\u540e\u6587\uff09\uff0c\u4e5f\u53ef\u4ee5\u5728\u70e7\u5f55\u524d\u5237\u6389\u6574\u4e2a\u56fa\u4ef6\uff1a</p>\n<pre><code>$ sudo esptool.py --port /dev/ttyUSB0 erase_flash\n</code></pre>\n<p>\u5f53\u6587\u4ef6\u7cfb\u7edf\u88ab\u7834\u574f\u6216\u8005\u67d0\u4e2a Lua \u7a0b\u5e8f\u51fa\u9519\u4ee5\u540e\u5bfc\u81f4\u7cfb\u7edf\u4e0d\u65ad\u91cd\u542f\u65f6\uff0c\u64e6\u9664\u6574\u4e2a Flash \u51e0\u4e4e\u662f\u5fc5\u8981\u7684\uff08\u5b9e\u9645\u4e5f\u53ef\u4ee5\u64e6\u9664\u6587\u4ef6\u7cfb\u7edf\u6240\u5728\u7684\u533a\u5757\u6216\u8005\u91cd\u5199\u8be5\u533a\u5757\uff09\uff0c\u5f53\u7136\uff0c\u8fd8\u6709\u4e00\u4e9b\u53e6\u7c7b\u7684\u529e\u6cd5\uff0c\u540e\u9762\u4f1a\u8865\u5145\u3002</p>\n<p>###\u5728Windows\u4e0b</p>\n<p>\u56fa\u4ef6\u4e0b\u8f7d\u5730\u5740\uff1a<a href=\"https://github.com/nodemcu/nodemcu-firmware/releases/\">NodeMCU Firmware Release</a>\n\u4e00\u952e\u70e7\u5f55\u8f6f\u4ef6\u4e0b\u8f7d\u5730\u5740\uff1a<a href=\"https://github.com/nodemcu/nodemcu-flasher\">nodemcu-flasher</a></p>\n<p>\u6253\u5f00\u4e00\u952e\u70e7\u5f55\u8f6f\u4ef6\uff0c\u8bbe\u7f6e\u56fa\u4ef6\u6240\u5728\u76ee\u5f55</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/Meekdai/meekdai.github.io/assets/11755104/144b7448-49ed-4a51-9324-9591f2228cdf\"><img src=\"https://github.com/Meekdai/meekdai.github.io/assets/11755104/144b7448-49ed-4a51-9324-9591f2228cdf\" alt=\"2682123040.jpg\" style=\"max-width: 100%;\"></a></p>\n<p>\u8bbe\u7f6eESP8266 FLASH\u4fe1\u606f\uff0c\u6ce2\u7279\u7387\u53ef\u4ee5\u81ea\u5df1\u8bbe\u5b9a\uff0c9600\u5e94\u8be5\u4f1a\u6709\u70b9\u6162\u3002</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/Meekdai/meekdai.github.io\"><img src=\"https://github.com/Meekdai/meekdai.github.io\" alt=\"1498565922.jpg\" style=\"max-width: 100%;\"></a></p>\n<p>\u9009\u62e9\u4e32\u53e3\uff0c\u5f00\u59cb\u70e7\u5f55\uff0c\u6709\u4e9b\u6587\u6863\u8bf4\u9700\u8981GPIO0\u62c9\u4f4e\u540e\u4e0a\u7535\uff0c\u4f46\u662f\u6211\u4e0d\u9700\u8981\u62c9\u4f4e\u4e5f\u53ef\u4ee5\u70e7\u5199\u3002</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/Meekdai/meekdai.github.io/assets/11755104/47b2cd88-787f-471b-8247-9450d334b047\"><img src=\"https://github.com/Meekdai/meekdai.github.io/assets/11755104/47b2cd88-787f-471b-8247-9450d334b047\" alt=\"2891132200.jpg\" style=\"max-width: 100%;\"></a></p>\n<p>\u70e7\u5f55\u5b8c\u6210</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/Meekdai/meekdai.github.io/assets/11755104/f56ae279-c339-4ca6-a0f3-18dc0f05390d\"><img src=\"https://github.com/Meekdai/meekdai.github.io/assets/11755104/f56ae279-c339-4ca6-a0f3-18dc0f05390d\" alt=\"1930085769.jpg\" style=\"max-width: 100%;\"></a></p>\n<p>\u4e0a\u7535\u540eESP8266\u4eceFLASH\u6b63\u5e38\u542f\u52a8\u3002\u4e32\u53e3\u6ce2\u7279\u7387\u8bbe\u7f6e\u4e3a9600\uff0c\u5c31\u53ef\u4ee5\u548cnodemcu\u4ea4\u4e92\u4e86\uff0c\u4f46\u662f\u590d\u4f4d\u540e\u524d\u9762\u4f1a\u6709\u4e00\u6bb5\u4e71\u7801\u6709\u5f85\u89e3\u51b3\u3002</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/Meekdai/meekdai.github.io/assets/11755104/4ee9e4dd-c028-4e56-a9a2-ec6d1a79a327\"><img src=\"https://github.com/Meekdai/meekdai.github.io/assets/11755104/4ee9e4dd-c028-4e56-a9a2-ec6d1a79a327\" alt=\"424483076.jpg\" style=\"max-width: 100%;\"></a></p>\n<p>\u53e6\u5916\uff0c\u6700\u65b0\u7684NodeMCU \u7248\u672c\u8c8c\u4f3c\u6ca1\u6709bin\u6587\u4ef6\u4e0b\u8f7d\uff0c\u9700\u8981\u81ea\u5df1\u7f16\u8bd1\uff0c\u8fd9\u4e2a\u540e\u9762\u518d\u6765\u89e3\u51b3\u3002</p>\n<p>##\u57fa\u672c\u64cd\u4f5c\u6f14\u793a</p>\n<p>\u70e7\u5f55\u5b8c\u4ee5\u540e\u6309\u4e0b RST \u6309\u94ae\u91cd\u542f NodeMCU\uff0c\u518d\u542f\u52a8\u4e32\u53e3\u5de5\u5177\u5c31\u53ef\u4ee5\u8fdb\u5165 Lua \u4ea4\u4e92\u5f0f\u547d\u4ee4\u884c\uff1a\n\u5728\u5728Linux\u4e0b\u53ef\u4ee5\u7528<code>$ minicom -D /dev/ttyUSB0</code>\u6765\u6253\u5f00\u4e32\u53e3\u5de5\u5177\uff0cWindows\u4e0b\u76f4\u63a5\u8fd0\u884c\u76f8\u5e94\u7684\u8f6f\u4ef6\u5c31\u884c\u4e86\u3002</p>\n<pre><code>&gt; print('Hello, Meekdai')\nHello, Meekdai\n&gt; gpio.mode(0, gpio.OUTPUT)\n&gt; gpio.write(0, gpio.LOW)\n&gt; gpio.write(0, gpio.HIGH)\n&gt; file.format()\n&gt; node.restart()\n</code></pre>\n<p>\u4e0a\u9762\u51e0\u6761\u547d\u4ee4\u5206\u522b\u5b8c\u6210\uff1a</p>\n<ul>\n<li>\u6253\u5370\u4e86\u4e00\u4e32\u5b57\u7b26\u4e32</li>\n<li>\u5f00/\u5173\u4e86\u9760\u8fd1 USB \u53e3\u7684 LED\uff08\u9760\u8fd1 Wifi \u6a21\u5757\u7684 LED \u7684 pin \u4e3a 4\uff09</li>\n<li>\u683c\u5f0f\u5316\u6587\u4ef6\u7cfb\u7edf</li>\n<li>\u6700\u540e\u91cd\u542f\u4e86 NodeMCU</li>\n</ul>\n<p>\u5982\u679c\u5acc\u4e0d\u591f\u9177\uff0c\u53ef\u4ee5\u53c2\u8003 <a href=\"http://nodemcu.github.io/\" rel=\"nofollow\">NodeMCU API \u624b\u518c</a> \u53ef\u4ee5\u505a\u66f4\u591a\u6709\u8da3\u7684\u64cd\u4f5c\u3002</p>\n<p>\u63a5\u4e0b\u6765\uff0c\u521b\u5efa\u4e00\u4e2a\u521d\u59cb\u5316\u7a0b\u5e8f\uff1a<code>init.lua</code>\uff0c\u5b83\u5728 NodeMCU \u542f\u52a8\u540e\u81ea\u52a8\u6267\u884c\u3002</p>\n<p>\u54b1\u4eec\u901a\u8fc7\u8be5\u7a0b\u5e8f\u5728 NodeMCU \u542f\u52a8\u540e\u7acb\u5373\u70b9\u4eae LED\uff1a</p>\n<pre><code>&gt; file.open('init.lua','w')\n&gt; file.writeline('gpio.mode(0,gpio.OUTPUT)')\n&gt; file.writeline('gpio.write(0,gpio.LOW)')\n&gt; file.close()\n&gt; node.restart()\n</code></pre>\n<p><code>init.lua</code> \u662f NodeMCU \u542f\u52a8\u65f6\u9ed8\u8ba4\u6267\u884c\u7684\u7b2c\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u6709\u70b9\u7c7b\u4f3c Linux \u4e0a\u7684 init \u7a0b\u5e8f\u3002\u901a\u8fc7\u5b83\u8fd8\u53ef\u4ee5\u52a0\u8f7d\u5176\u4ed6\u7a0b\u5e8f\u6765\u5b8c\u6210\u7279\u5b9a\u7684\u529f\u80fd\u3002</p>\n<p>\u54b1\u4eec\u518d\u505a\u4e00\u4e2a\u590d\u6742\u4e00\u70b9\u7684\u64cd\u4f5c\uff0c\u5728 <code>init.lua</code> \u91cc\u5934\u8c03\u7528\uff08dofile\uff09\u4e00\u4e2a <code>user.lua</code> \u6765\u70b9\u4eae LED\uff1a</p>\n<pre><code>&gt; file.open('init.lua','w')\n&gt; file.writeline('dofile(\"user.lua\")')\n&gt; file.close()\n&gt; file.open('user.lua','w')\n&gt; file.writeline('gpio.mode(0,gpio.OUTPUT)')\n&gt; file.writeline('gpio.write(0,gpio.LOW)')\n&gt; file.close()\n&gt; node.restart()\n</code></pre>\n<p>\u8bfb\u51fa <code>init.lua</code> \u770b\u4e0b\u6548\u679c\uff1a</p>\n<pre><code>&gt; file.open('init.lua','r')\n&gt; print(file.readline())\ndofile(\"user.lua\")\n&gt; file.close()\n</code></pre>\n<p>\u5f53 <code>user.lua</code> \u811a\u672c\u51fa\u9519\u65f6\u53ef\u80fd\u5bfc\u81f4\u7cfb\u7edf\u4e0d\u505c\u5730\u91cd\u542f\uff0c\u8fd9\u4e2a\u65f6\u5019\u9664\u4e86\u64e6\u9664\u6574\u4e2a Flash \u5916\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7 <code>init.lua</code> \u505a\u4e2a\u7b80\u5355\u7684\u5bb9\u9519\u5904\u7406\uff1a</p>\n<pre><code>if gpio.read(2) == 1:\n    file.format()\nelse\n    dofile('user.lua')\nend\n</code></pre>\n<p>\u4e00\u65e6\u7cfb\u7edf\u51fa\u9519\uff0c\u53ea\u8981\u62c9\u9ad8 GPIO 2 \u5c31\u53ef\u4ee5\u683c\u5f0f\u5316\u6587\u4ef6\u7cfb\u7edf\u3002</p>\n<p>\u6682\u65f6\u5148\u5230\u8fd9\u91cc\u5427\uff0c\u540e\u9762\u4f1a\u9010\u6b65\u4ecb\u7ecd\u66f4\u591a\u5b9e\u4f8b\u3002</p>\n<p>##\u4e0a\u4f20 Lua \u7a0b\u5e8f</p>\n<p>\u4e0a\u9762\u6f14\u793a\u7684\u662f\u547d\u4ee4\u884c\u64cd\u4f5c\uff0c\u8fd9\u91cc\u518d\u4ecb\u7ecd\u5982\u4f55\u628a\u5728\u4e3b\u673a\u7aef\u5199\u597d\u7684 Lua \u7a0b\u5e8f\u4e0a\u4f20\u5230 NodeMCU \u4e0a\u3002</p>\n<p>\u6d4b\u8bd5\u8fc7\u4e24\u4e2a\u5de5\u5177\u90fd\u53ef\u4ee5\u7528\u6765\u4e0a\u4f20 Lua \u7a0b\u5e8f\uff0c\u5206\u522b\u662f\uff1a</p>\n<ul>\n<li>\n<a href=\"https://github.com/4refr0nt/luatool\">luatool.py</a>\uff1a\u53ef\u7528\u4e8e\u547d\u4ee4\u884c\u4f20\u9001 Lua \u811a\u672c\uff0c\u65e0\u987b\u590d\u6742\u7684\u56fe\u5f62\u5316\u5de5\u5177\u652f\u6301\uff0c\u540c\u65f6\u652f\u6301\u901a\u8fc7\u4e32\u53e3\u548c Telnet \u4e0a\u4f20</li>\n<li>\n<a href=\"https://github.com/md5crypt/nodemcu.py\">nodemcu.py</a>\uff1a\u9664\u4e86\u4e0d\u652f\u6301\u901a\u8fc7 Telnet \u4e0a\u4f20\u5916\uff0c\u57fa\u672c\u529f\u80fd\u540c luatool\uff0c\u53ea\u662f\u64cd\u4f5c\u65b9\u5f0f\u7a0d\u6709\u5dee\u5f02</li>\n</ul>\n<p>\u4e0b\u8f7d\u4e0a\u8ff0\u5de5\u5177\uff1a</p>\n<pre><code>$ git clone https://github.com/4refr0nt/luatool.git\n$ git clone https://github.com/md5crypt/nodemcu.py.git\n</code></pre>\n<p>\u4e24\u4e2a\u90fd\u53ef\u4ee5\u8fdb\u884c\u6587\u4ef6\u4f20\u8f93\uff0c\u7b2c\u4e8c\u4e2a\u8fd8\u53ef\u4ee5\u4f5c\u4e3a\u4e32\u53e3\u7ec8\u7aef\uff0c\u4e24\u4e2a\u90fd\u4f9d\u8d56 pySerial\uff0c\u7b2c\u4e8c\u4e2a\u8fd8\u9700\u8981\u5b89\u88c5 clipboard\uff1a</p>\n<pre><code>$ easy_install clipboard\n</code></pre>\n<p>\u5728\u4e0a\u4f20\u524d\u54b1\u4eec\u5199\u4e00\u4e2a\u7b80\u5355\u7684 <code>init.lua</code> \u811a\u672c\uff0c\u8be5\u811a\u672c\u7528\u4e8e\u70b9\u4eae\u53e6\u5916\u4e00\u4e2a LED\uff1a</p>\n<pre><code>print('Hello, Meekdai')\nprint('I am Nodemcu')\ngpio.mode(4, gpio.OUTPUT)\ngpio.write(4, gpio.LOW)\n</code></pre>\n<p>###luatool.py</p>\n<p>\u5728Linux\u4e0b\u901a\u8fc7 luatool.py \u4f20\u9001\uff0c\u4f20\u9001\u5b8c\u7acb\u9a6c\u91cd\u542f\uff1a</p>\n<pre><code>$ cd luatool/luatool/\n$ sudo ./luatool.py -p /dev/ttyUSB0 -b 9600 -f init.lua -r\n</code></pre>\n<p>\u67e5\u770b\u5e2e\u52a9\uff0c\u53ef\u4ee5\u770b\u5230\u66f4\u591a\u7528\u6cd5\uff1a</p>\n<pre><code>$ sudo ./luatool.py -h\nUsage: luatool.py [-h] [-p PORT] [-b BAUD] [-f SRC] [-t DEST] [-c] [-r] [-d]\n                  [-v] [-a] [-l] [-w] [-i] [--delete DELETE] [--ip IP]\nESP8266 Lua script uploader.\noptional arguments:\n  -h, --help            show this help message and exit\n  -p PORT, --port PORT  Device name, default /dev/ttyUSB0\n  -b BAUD, --baud BAUD  Baudrate, default 9600\n  -f SRC, --src SRC     Source file on computer, default main.lua\n  -t DEST, --dest DEST  Destination file on MCU, default to source file name\n  -c, --compile         Compile lua to lc after upload\n  -r, --restart         Restart MCU after upload\n  -d, --dofile          Run the Lua script after upload\n  -v, --verbose         Show progress messages.\n  -a, --append          Append source file to destination file.\n  -l, --list            List files on device\n  -w, --wipe            Delete all lua/lc files on device.\n  -i, --id              Query the modules chip id.\n  --delete DELETE       Delete a lua/lc file from device.\n  --ip IP               Connect to a telnet server on the device (--ip\n                        IP[:port])\n</code></pre>\n<p>\u5728Windows\u4e0b\u7684\u6307\u4ee4\u5982\u4e0b\uff0c\u5f53\u7136\u4f60\u9700\u8981\u5148\u5b89\u88c5Python</p>\n<pre><code>python ./luatool.py --port COM3 --src init.lua -r\n</code></pre>\n<p>###nodemcu.py</p>\n<p>\u901a\u8fc7 <code>nodemcu.py</code> \u4e0a\u4f20\uff1a</p>\n<pre><code>$ cd nodemcu.py/\n$ python ./nodemcu.py /dev/ttyUSB0 9600\n&gt; :file init.lua init.lua\n&gt; node.restart()\n</code></pre>\n<p>\u67e5\u770b\u5e2e\u52a9\uff0c\u66f4\u591a\u7528\u6cd5\uff1a</p>\n<pre><code>&gt; :help\n:help\n:uart [boudrate]          - dynamic boudrate change\n:load src                 - evaluate file content\n:file dst src             - write local file src to dst\n:paste [file]             - evaluate clipboard content\n                            or write it to file if given\n:cross-compile dst [file] - compile file or clipboard using\n                            luac-cross and save to dst\n:execute [file]           - cross-compile and execute clipboard or\n                            file content without saving to flash\n:soft-compile dst [file]  - compile file or clipboard on device\n                            and save do dst. This call should handle\n                            lager files than file.compile\n</code></pre>\n<p>##Lua \u7a0b\u5e8f\u793a\u4f8b</p>\n<p>\u8fd9\u91cc\u4ec5\u4ec5\u5c55\u793a\u51e0\u5219\u57fa\u672c\u7684 Lua \u7a0b\u5e8f\uff0c\u65b9\u4fbf\u5927\u5bb6\u5feb\u901f\u4e0a\u624b\u3002\u66f4\u591a\u4f8b\u5b50\u8bf7\u53c2\u8003 NodeMCU Firmware \u4e0b\u7684 <a href=\"https://github.com/nodemcu/nodemcu-firmware/tree/master/lua_examples\">lua_examples</a></p>\n<p>###\u542f\u52a8\u540e\u4e0d\u65ad\u95ea\u70c1 LED</p>\n<p>\u4e0a\u9762\u5176\u5b9e\u5df2\u7ecf\u6f14\u793a\u4e86 LED \u7684\u57fa\u672c\u64cd\u4f5c\uff0c\u8fd9\u91cc\u518d\u4ecb\u7ecd\u4e00\u4e2a timer module \u7684 API\uff1atmr.alarm()\uff1a</p>\n<blockquote>\n<p>tmr.alarm(id, interval, repeat, function do())</p>\n<p>id: 0~6, alarmer id. Interval: alarm time, unit: millisecond repeat: 0</p>\n<ul>\n<li>one time alarm, 1 - repeat function do(): callback function for alarm timed out</li>\n</ul>\n</blockquote>\n<p>\u54b1\u4eec\u57fa\u4e8e\u5b83\u5b9e\u73b0\u4e00\u4e2a <code>blink.lua</code>:</p>\n<pre><code>print('Blink Demo')\nlighton=0\nled=0\ngpio.write(led, gpio.HIGH)\ntmr.alarm(0,1000,1,function()\nif lighton==0 then\n    lighton=1\n    gpio.mode(led, gpio.OUTPUT)\n    gpio.write(led, gpio.LOW)\nelse\n    lighton=0\n    gpio.write(led, gpio.HIGH)\nend\nend)\ngpio.mode(led, gpio.INPUT)\n</code></pre>\n<p>\u4e0a\u4f20 <code>blink.lua</code> \u5e76\u7acb\u5373\u6267\u884c\uff1a</p>\n<pre><code>python ./luatool.py --port COM3 --src blink.lua -r\n</code></pre>\n<blockquote>\n<p>\u8fd9\u91cc\u63d0\u9192\u4e00\u4e0b\uff0c\u5728\u7528\u4e32\u53e3\u4e0b\u8f7d\u7a0b\u5e8f\u7684\u65f6\u5019\uff0c\u9700\u8981\u5148\u628a\u4e32\u53e3\u901a\u4fe1\u5de5\u5177\u7ed9\u5173\u95ed\uff0c\u4e0d\u7136\u4f1a\u62a5\u9519</p>\n</blockquote>\n<p>###\u8fdc\u7a0b\u63a7\u5236 LED \u95ea\u70c1</p>\n<p>\u5bf9\u4e8e\u7269\u8054\u7f51\u6765\u8bb2\uff0c\u8fdc\u7a0b\u63a7\u5236\u5f88\u5173\u952e\u3002\u54b1\u4eec\u8fd9\u91cc\u6f14\u793a\u5982\u4f55\u901a\u8fc7 Wifi \u5f00\u542f\u4e00\u4e2a\u670d\u52a1\u7aef\u53e3 8888 \u7528\u4e8e\u63a7\u5236 LED\uff0c<code>remote_led.lua</code>\uff1a</p>\n<pre><code>-- \u5f00\u542f Wifi \u5e76\u83b7\u5f97 NodeMCU IP \u5730\u5740\n-- ssid \u548c pwd \u5206\u522b\u4e3a\u81ea\u5bb6\u8def\u7531\u5668\u7684 SSID \u548c\u8bbf\u95ee\u5bc6\u7801\nlocal ssid=\"SSID\"\nlocal pwd=\"password\"\nip=wifi.sta.getip()\nprint(ip)\nif not ip then\n    wifi.setmode(wifi.STATION)\n    wifi.sta.config(ssid,pwd)\n    print(wifi.sta.getip())\nend\n-- \u5f00\u542f\u4e00\u4e2a 8888 \u7684\u7aef\u53e3\n-- \u5e76\u901a\u8fc7 node.input() \u8c03\u7528 Lua \u89e3\u91ca\u5668\u63a7\u5236 LED\nsrv=net.createServer(net.TCP)\nsrv:listen(8888,function(conn)\n    conn:on(\"receive\",function(conn,payload)\n    node.input(\"gpio.mode(0, gpio.OUTPUT)\")\n    node.input(\"gpio.write(0, gpio.LOW)\")\n    end)\nend)\n</code></pre>\n<p>\u4e0a\u4f20 Lua \u7a0b\u5e8f\u5230\u670d\u52a1\u5668\u6267\u884c\uff1a</p>\n<pre><code>python ./luatool.py --port COM3 --src remote_led.lua -r\n</code></pre>\n<p>\u67e5\u770b NodeMCU \u83b7\u53d6\u7684 IP \u5730\u5740\uff1a</p>\n<pre><code>&gt; print(wifi.sta.getip())\n192.168.0.128   255.255.255.0   192.168.0.1\n</code></pre>\n<p>\u5e76\u6d4b\u8bd5\uff08\u5728Linux\u4e0b\uff09\uff1a</p>\n<pre><code>$ sudo apt-get install lynx\n$ lynx 192.168.0.104:8888\n</code></pre>\n<p>###\u8fdc\u7a0b\u63a7\u5236 LED \u5f00\u5173</p>\n<p>\u521b\u5efa\u4e00\u4e2a<code>wifi_led.lua</code>\uff0c\u6ce8\u610f\u4fee\u6539\u65e0\u7ebf\u7f51\u7684\u540d\u79f0\u548c\u5bc6\u7801\u3002</p>\n<pre><code>wifi.setmode(wifi.STATION)  \nwifi.sta.config(\"YOUR_NETWORK_NAME\",\"YOUR_NETWORK_PASSWORD\")  \nprint(wifi.sta.getip())  \nled1 = 0  \ngpio.mode(led1, gpio.OUTPUT)  \nsrv=net.createServer(net.TCP)  \nsrv:listen(80,function(conn)  \n    conn:on(\"receive\", function(client,request)  \n        local buf = \"\";  \n        local _, _, method, path, vars = string.find(request, \"([A-Z]+) (.+)?(.+) HTTP\");  \n        if(method == nil)then  \n            _, _, method, path = string.find(request, \"([A-Z]+) (.+) HTTP\");  \n        end  \n        local _GET = {}  \n        if (vars ~= nil)then  \n            for k, v in string.gmatch(vars, \"(%w+)=(%w+)&amp;*\") do  \n                _GET[k] = v  \n            end  \n        end  \n        buf = buf..\"&lt;h1&gt; Meekdai LED Web Server&lt;/h1&gt;\";  \n        buf = buf..\"&lt;p&gt;GPIO0 &lt;a href=\\\"?pin=ON1\\\"&gt;&lt;button&gt;ON&lt;/button&gt;&lt;/a&gt; &lt;a href=\\\"?pin=OFF1\\\"&gt;&lt;button&gt;OFF&lt;/button&gt;&lt;/a&gt;&lt;/p&gt;\";  \n        local _on,_off = \"\",\"\"  \n        if(_GET.pin == \"ON1\")then  \n              gpio.write(led1, gpio.LOW);  \n        elseif(_GET.pin == \"OFF1\")then  \n              gpio.write(led1, gpio.HIGH);   \n        end  \n        client:send(buf);  \n        client:close();  \n        collectgarbage();  \n    end)  \nend)\n</code></pre>\n<p>\u67e5\u770b NodeMCU \u83b7\u53d6\u7684 IP \u5730\u5740\uff1a</p>\n<pre><code>&gt; print(wifi.sta.getip())\n192.168.0.128   255.255.255.0   192.168.0.1\n</code></pre>\n<p>\u7136\u540e\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165192.168.0.128\uff0c\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u754c\u9762\uff0c\u70b9\u51fbON\u4e3a\u6253\u5f00LED\u706f\uff0c\u70b9\u51fbOFF\u4e3a\u5173\u95ed\u3002</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://camo.githubusercontent.com/76871e0a432d6e335409256877951d7544dca02fc6d51fb7b2f5d15c8b67607d/687474703a2f2f6d65656b6461692e636f6d2f696d672f3766336231653839677931667a707179633078756b6a32306e773067716a73742e6a7067\"><img src=\"https://camo.githubusercontent.com/76871e0a432d6e335409256877951d7544dca02fc6d51fb7b2f5d15c8b67607d/687474703a2f2f6d65656b6461692e636f6d2f696d672f3766336231653839677931667a707179633078756b6a32306e773067716a73742e6a7067\" alt=\"3634745125.jpg\" data-canonical-src=\"http://meekdai.com/img/7f3b1e89gy1fzpqyc0xukj20nw0gqjst.jpg\" style=\"max-width: 100%;\"></a></p>\n<p>###\u5f00\u542f\u4e00\u4e2a Telnet \u670d\u52a1</p>\n<p>\u5148\u4ece NodeMCU.com \u4e0b\u8f7d\u8be5\u4f8b\u5b50\uff0c<code>telnet.lua</code>\uff1a</p>\n<pre><code>-- a simple telnet server\ns=net.createServer(net.TCP,180)\ns:listen(2323,function(c)\n    function s_output(str)\n      if(c~=nil)\n        then c:send(str)\n      end\n    end\n    node.output(s_output, 0)\n    -- re-direct output to function s_ouput.\n    c:on(\"receive\",function(c,l)\n      node.input(l)\n      --like pcall(loadstring(l)), support multiple separate lines\n    end)\n    c:on(\"disconnection\",function(c)\n      node.output(nil)\n      --unregist redirect output function, output goes to serial\n    end)\n    print(\"Welcome to NodeMCU world.\")\nend)\n</code></pre>\n<p>\u4e0a\u4f20\u5e76\u6267\u884c\uff1a</p>\n<pre><code>python ./luatool.py --port COM3 --src telnet.lua -r\n</code></pre>\n<p>\u901a\u8fc7 telnet \u8fde\u63a5\uff1a</p>\n<p><strong>\u5728Linux\u4e0b\uff1a</strong></p>\n<pre><code>$ sudo apt-get install telnet\n$ telnet 192.168.0.104 2323\nTrying 192.168.0.104...\nConnected to 192.168.0.104.\nEscape character is '^]'.\nWelcome to NodeMCU world.\n&gt; print('Hello, NodeMCU Telnet')\nHello, NodeMCU Telnet\n</code></pre>\n<p><strong>\u5728Windows\u4e0b\uff1a</strong></p>\n<p>\u9700\u8981\u5148\u53bb\u542f\u52a8\u6216\u8005\u5173\u95edWindows\u529f\u80fd\u4e2d\u6253\u5f00telnet\u670d\u52a1\uff0c\u7136\u540e\uff1a</p>\n<pre><code>&gt; print(wifi.sta.getip())\n192.168.0.128   255.255.255.0   192.168.0.1\n&gt; telnet 192.168.0.128 2323\nWelcome to NodeMcu world.\n</code></pre>\n<p>\u6709\u4e86 telnet \u670d\u52a1\uff0c\u54b1\u5c31\u53ef\u4ee5\u4e0d\u4f9d\u8d56\u4e32\u53e3\u800c\u662f\u76f4\u63a5\u901a\u8fc7 Wifi \u4e0a\u4f20 Lua \u811a\u672c\u4e86\uff1a</p>\n<p>\u5728Linux\u4e0b\uff1a</p>\n<pre><code>$ cat test.lua\nprint('Upload via telnet service')\n$ sudo ./luatool.py --ip 192.168.0.104:2323 -f test.lua -d -v\n</code></pre>\n<p>\u5728Windows\u4e0b\uff1a</p>\n<pre><code>$ cat test.lua\nprint('Upload via telnet service')\n$ python ./luatool.py --ip 192.168.0.128:2323 -f test.lua -d -v\n</code></pre>\n<p>\u597d\u4e86\uff0c\u57fa\u7840\u7684\u5b66\u4e60\u5c31\u5230\u8fd9\u91cc\uff0c\u6211\u5176\u5b9e\u662f\u4e00\u904d\u641c\u7d22\u8d44\u6599\uff0c\u81ea\u5df1\u4e00\u904d\u5c1d\u8bd5\uff0c\u7136\u540e\u8bb0\u5f55\u4e0b\u6765\u7684\uff0c\u5982\u679c\u540e\u7eed\u53d1\u73b0\u4ec0\u4e48\u5730\u65b9\u4e0d\u5bf9\uff0c\u4f1a\u5bf9\u4e0a\u9762\u7684\u5185\u5bb9\u8fdb\u884c\u4fee\u6539\u3002</p>\n", "title": "Meekdai", "homeUrl": "http://blog.meekdai.com", "postSourceUrl": "https://github.com/Meekdai/meekdai.github.io/issues/18", "faviconUrl": "http://meekdai.com/favicon.ico", "filingNum": "\u6d59ICP\u590720023628\u53f7", "startSite": "02/16/2015"}
if(blogBase["startSite"]!=""){
    var now=new Date();
    var startSite=new Date(blogBase["startSite"]);
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("year").innerHTML=now.getFullYear();
    document.getElementById("runday").innerHTML="Blog run "+diffDay+" days • ";
}

document.title=blogBase["postTitle"];
document.getElementById("postTitle").innerHTML=blogBase["postTitle"];
document.getElementById("postBody").innerHTML=blogBase["postBody"];

if(blogBase["faviconUrl"]!=""){
    link=document.createElement("link");
    link.setAttribute("rel","icon");
    link.setAttribute("href",blogBase["faviconUrl"]);
    document.head.appendChild(link);
}

if(blogBase["filingNum"]!=""){document.getElementById("filingNum").innerHTML=blogBase["filingNum"]+" • ";}
document.getElementById("footerblogTitle").innerHTML=blogBase["title"];
document.getElementById("footerblogTitle").href=blogBase["homeUrl"];

function gotoSource(){window.open(blogBase["postSourceUrl"]);}

var utterancesLoad=0
document.getElementById("pathHome").setAttribute("d",value=IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",value=IconList["github"]);
document.getElementById("themeSwitch").setAttribute("d",value=IconList["sun"]);
if(localStorage.getItem("meek_theme")==null){localStorage.setItem("meek_theme","light")}
else if(localStorage.getItem("meek_theme")=="dark"){changeDark();}
else if(localStorage.getItem("meek_theme")=="light"){changeLight();}

function changeDark(){
    document.getElementsByTagName("html")[0].attributes.getNamedItem("data-color-mode").value="dark";
    document.getElementById("themeSwitch").attributes.getNamedItem("d").value=IconList["moon"];
    if(utterancesLoad==1){utterancesTheme("dark-blue");}
}
function changeLight(){
    document.getElementsByTagName("html")[0].attributes.getNamedItem("data-color-mode").value="light";
    document.getElementById("themeSwitch").attributes.getNamedItem("d").value=IconList["sun"];
    if(utterancesLoad==1){utterancesTheme("github-light");}
}
function modeSwitch(){
    if(document.getElementsByTagName("html")[0].attributes[0].value=="light"){changeDark();localStorage.setItem("meek_theme","dark");}
    else{changeLight();localStorage.setItem("meek_theme","light");}
}
function utterancesTheme(theme){
    const message = {type: 'set-theme',theme: theme};
    const iframe = document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message, 'https://utteranc.es');
}

utterancesFrame=document.getElementsByClassName("utterances-frame")[0];
if(utterancesFrame!=null){
    utterancesFrame.onload=function(){
        utterancesLoad=1;
        if(localStorage.getItem("meek_theme")=="dark"){changeDark();}
        else{changeLight();}
    }
}
else{console.info("utterancesFrame load be late");}

</script>
</html>
